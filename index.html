<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Yi Liu - Cryptography Researcher | Jinan University</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta name="description"
    content="Yi Liu's academic profile at Jinan University. Research in cryptography, secure multi-party computation, zero-knowledge proofs, and blockchain applications.">

  <meta name="keywords"
    content="cryptography, security, privacy, multi-party computation, zero-knowledge, blockchain, Jinan University">
  <meta name="author" content="Yi Liu">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://liuyi.pro">

  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://liuyi.pro/">
  <meta property="og:title" content="Yi Liu - Cryptography Researcher">
  <meta property="og:description"
    content="Yi Liu's research in cryptography, secure multi-party computation, and zero-knowledge proofs at Jinan University.">
  <meta property="og:image" content="https://liuyi.pro/public/img/logo.jpg">

  <!-- Twitter Card -->
  <meta property="twitter:card" content="summary">
  <meta property="twitter:url" content="https://liuyi.pro/">
  <meta property="twitter:title" content="Yi Liu - Cryptography Researcher">
  <meta property="twitter:description" content="Cryptography and security research at Jinan University.">
  <meta property="twitter:image" content="https://liuyi.pro/public/img/logo.jpg">

  <!-- CDN优化配置 -->
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="//www.googletagmanager.com">
  <link rel="dns-prefetch" href="//hm.baidu.com">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>

  <!-- 优化CSS加载顺序 -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css">
  </noscript>
  <link rel="stylesheet" href="public/css/styles.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css" />
  
  <!-- 极简主题设置 -->
  <script>
    (function() {
      const THEME_KEY = 'theme-preference';
      const currentTheme = localStorage.getItem(THEME_KEY) || 
        (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      
      // 立即设置主题属性
      document.documentElement.setAttribute('data-theme', currentTheme);
      document.body && document.body.setAttribute('data-theme', currentTheme);
      
      // 关键：通过CSS直接设置按钮状态，避免JS延迟
      const style = document.createElement('style');
      style.textContent = `
        .toggle-track {
          background-color: #ccc;
        }
        .toggle-track .toggle-thumb {
          left: 2px;
        }
        .toggle-track .light-icon {
          opacity: 1;
        }
        .toggle-track .dark-icon {
          opacity: 0;
        }
        [data-theme="dark"] .toggle-track {
          background-color: #66b3ff;
        }
        [data-theme="dark"] .toggle-track .toggle-thumb {
          left: 24px;
        }
        [data-theme="dark"] .toggle-track .light-icon {
          opacity: 0;
        }
        [data-theme="dark"] .toggle-track .dark-icon {
          opacity: 1;
        }
      `;
      document.head.appendChild(style);
    })();
  </script>

  <link rel="shortcut icon" href="public/img/logo.ico" type="image/ico" />

  <!-- 关键字体预加载 -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/fonts/KaTeX_Main-Regular.woff2" as="font"
    type="font/woff2" crossorigin>
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/fonts/KaTeX_Math-Italic.woff2" as="font"
    type="font/woff2" crossorigin>
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/fonts/KaTeX_Size1-Regular.woff2" as="font"
    type="font/woff2" crossorigin>
  <link rel="preload" href="public/fonts/zs.ttf" as="font" type="font/ttf" crossorigin>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-V6PJ8BXB1K"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-V6PJ8BXB1K');
  </script>
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f3af6cc5f91a65349295cd27a99a25c3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</head>

<body>
  <!-- 滚动进度指示器 -->
  <div class="progress-bar" id="progress-bar"></div>
  <!-- 移动端主题切换按钮 - CV页面专用 -->
  <button class="mobile-theme-toggle" id="mobile-theme-toggle" title="切换主题">
    <svg class="theme-icon-svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41M12 17a5 5 0 100-10 5 5 0 000 10z"/>
    </svg>
  </button>
  <div id="app"></div>
  <script>
    window.$docsify = {
      name: 'Yi Liu',
      loadNavbar: true,
      homepage: 'docs/cv.md',
      latex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        customOptions: {}
      },
      requestHeaders: {
        'cache-control': 'no-cache',
      },
      serviceWorker: false,
      mergeNavbar: true
    }
  </script>
  <!-- 自定义脚本 - 优化为仅在对应页面加载 -->
  <script src="public/js/publications.js"></script>
  <script src="public/js/dark-mode.js"></script>
  <!-- 优化后的CDN资源加载 -->
  <script src="https://cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/js/docsify-themeable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-pagination@latest/dist/docsify-pagination.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-copy-code@latest/dist/docsify-copy-code.min.js"></script>

  <!-- 代码高亮 - 延迟加载 -->
  <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-latex.min.js"></script>

  <!-- KaTeX - 延迟加载 -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/marked@4"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/docsify-katex@latest/dist/docsify-katex.js"></script>

  <!-- Vue3 - 延迟加载 -->
  <script defer src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
  <script defer src="/public/js/docsify-scroll-to-top.js"></script>
  <script src="/public/js/progress-bar.js"></script>
  <script src="/public/js/address-toggle.js"></script>


  <!-- 地图  -->
  <script type="text/javascript">
    window._AMapSecurityConfig = {
      securityJsCode: "fa4c1a0ee4c92db8519fa781ece30b99	",
    };
  </script>
  <script src="https://webapi.amap.com/loader.js"></script>
  <script type="text/javascript">
    // Docsify plugin for AMap - only load on CV page
    window.$docsify = window.$docsify || {};
    window.$docsify.plugins = (window.$docsify.plugins || []).concat([
      function(hook, vm) {
        let amapInstance = null;
        let amapLoading = false;

        // Check if we're on the CV page
        function isCVPage() {
          const currentPath = window.location.hash;
          return currentPath === '' || currentPath === '#' || currentPath === '#/' || 
                 currentPath.startsWith('#/cv') || currentPath.startsWith('#/docs/cv');
        }

        // Initialize AMap with improved error handling and retry logic
        function initAMap() {
          if (amapInstance || amapLoading) {
            console.log('AMap already initialized or loading');
            return;
          }

          const container = document.getElementById('amap-container');
          if (!container) {
            console.log('AMap container not found, retrying...');
            setTimeout(initAMap, 200);
            return;
          }

          if (typeof AMapLoader !== 'undefined') {
            amapLoading = true;
            AMapLoader.load({
              key: "6a6ac6b39f33cb76ee52d1ccef73da05",
              version: "2.0",
            })
              .then((AMap) => {
                // Ensure container is still available
                const container = document.getElementById('amap-container');
                if (!container) {
                  console.error('AMap container disappeared during loading');
                  amapLoading = false;
                  return;
                }

                try {
                  const map = new AMap.Map("amap-container", {
                    viewMode: '2D',
                    zoom: 17,
                    center: [113.412396, 23.016767],
                  });
                  const marker = new AMap.Marker({
                    position: [113.412396, 23.016767],
                    title: '我在这里'
                  });
                  map.add(marker);
                  amapInstance = map;
                  console.log('AMap initialized successfully');
                } catch (error) {
                  console.error('AMap creation error:', error);
                }
                amapLoading = false;
              })
              .catch((e) => {
                console.error('AMap initialization error:', e);
                amapLoading = false;
                // Retry after error
                setTimeout(() => {
                  if (isCVPage() && !amapInstance) {
                    console.log('Retrying AMap initialization...');
                    initAMap();
                  }
                }, 1000);
              });
          } else {
            console.error('AMapLoader not available');
            setTimeout(initAMap, 500);
          }
        }

        // Clean up AMap when leaving CV page
        function cleanupAMap() {
          if (amapInstance) {
            try {
              amapInstance.destroy();
            } catch (e) {
              console.error('Error destroying AMap:', e);
            }
            amapInstance = null;
          }
          
          const container = document.getElementById('amap-container');
          if (container) {
            container.innerHTML = '';
          }
          
          amapLoading = false;
        }

        // Robust initialization with multiple retry attempts
        function initAMapWithRetry(retryCount = 0) {
          if (!isCVPage()) return;
          
          const maxRetries = 3;
          const container = document.getElementById('amap-container');
          
          if (container && AMapLoader && !amapInstance && !amapLoading) {
            initAMap();
          } else if (retryCount < maxRetries) {
            setTimeout(() => initAMapWithRetry(retryCount + 1), 300 * (retryCount + 1));
          }
        }

        // Hook into docsify lifecycle
        hook.doneEach(function() {
          if (isCVPage()) {
            // Add delay to ensure DOM is fully rendered
            setTimeout(() => initAMapWithRetry(), 150);
          } else {
            cleanupAMap();
          }
        });

        // Handle page navigation with improved timing
        hook.beforeEach(function(content, next) {
          // Clean up when leaving CV page
          if (!isCVPage()) {
            cleanupAMap();
          }
          next(content);
        });

        // Additional hook for after navigation
        hook.afterEach(function(html, next) {
          if (isCVPage()) {
            setTimeout(() => initAMapWithRetry(), 200);
          }
          next(html);
        });
      }
    ]);
  </script>
</body>

</html>